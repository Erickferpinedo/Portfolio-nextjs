"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[563],{8563:function(e,t,n){n.r(t),n.d(t,{default:function(){return o}});var r=n(7437),i=n(2265);function o(e){let{total:t,collected:n,onReset:o}=e,l=Math.round(n/t*100),[s,u]=(0,i.useState)({x:0,y:0}),[a,d]=(0,i.useState)(!1),c=(0,i.useRef)(null),f=(0,i.useRef)({dragging:!1,offsetX:0,offsetY:0}),g=(e,t,n)=>Math.max(t,Math.min(e,n));(0,i.useEffect)(()=>{var e,t;let n=localStorage.getItem("orbHudPos"),r=c.current,i=window.innerWidth,o=window.innerHeight,l=null!==(e=null==r?void 0:r.offsetWidth)&&void 0!==e?e:260,s=null!==(t=null==r?void 0:r.offsetHeight)&&void 0!==t?t:44;if(n)try{let e=JSON.parse(n);u({x:g(e.x,8,i-l-8),y:g(e.y,8,o-s-8)})}catch(e){u({x:i-l-24,y:o-s-24})}else u({x:i-l-24,y:o-s-24});d(!0)},[]),(0,i.useEffect)(()=>{a&&localStorage.setItem("orbHudPos",JSON.stringify(s))},[s,a]),(0,i.useEffect)(()=>{let e=()=>{let e=c.current;if(!e)return;let t=window.innerWidth,n=window.innerHeight,r=e.offsetWidth,i=e.offsetHeight;u(e=>({x:g(e.x,8,t-r-8),y:g(e.y,8,n-i-8)}))};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]);let h=e=>{var t;if(!f.current.dragging)return;f.current.dragging=!1;let n=c.current;null==n||null===(t=n.releasePointerCapture)||void 0===t||t.call(n,e.pointerId),document.body.style.userSelect=""};return(0,r.jsxs)("div",{ref:c,style:{left:s.x,top:s.y},className:"fixed z-[55] flex items-center gap-3 rounded-full bg-white/90 p-2 pl-3 shadow-xl backdrop-blur cursor-grab active:cursor-grabbing",onPointerDown:e=>{var t;if(e.target.closest("button"))return;let n=c.current;n&&(null===(t=n.setPointerCapture)||void 0===t||t.call(n,e.pointerId),f.current.dragging=!0,f.current.offsetX=e.clientX-s.x,f.current.offsetY=e.clientY-s.y,document.body.style.userSelect="none")},onPointerMove:e=>{if(!f.current.dragging)return;let t=c.current;if(!t)return;let n=window.innerWidth,r=window.innerHeight,i=t.offsetWidth,o=t.offsetHeight;u({x:g(e.clientX-f.current.offsetX,8,n-i-8),y:g(e.clientY-f.current.offsetY,8,r-o-8)})},onPointerUp:h,onPointerCancel:h,children:[(0,r.jsx)("span",{className:"text-sm font-medium",children:"Orb Quest"}),(0,r.jsx)("div",{className:"h-2 w-24 overflow-hidden rounded bg-neutral-200 sm:w-28",children:(0,r.jsx)("div",{className:"h-full bg-gradient-to-r from-cyan-500 via-violet-500 to-emerald-500",style:{width:"".concat(l,"%")}})}),(0,r.jsxs)("span",{className:"w-10 text-center text-xs font-semibold",children:[n,"/",t]}),(0,r.jsx)("button",{onClick:e=>{e.stopPropagation(),o()},className:"rounded-full bg-neutral-900 px-3 py-1 text-xs text-white hover:opacity-90",children:"Reset"})]})}}}]);